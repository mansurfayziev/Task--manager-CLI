"""Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""
from models.task import STATUS_DISPLAY, PRIORITY_DISPLAY


def display_task(task: dict) -> None:
    """
    ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ¼ Ğ²Ğ¸Ğ´Ğµ.
    
    Args:
        task (dict): Ğ¡Ğ»Ğ¾Ğ²Ğ°Ñ€ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸.
    
    Output format:
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ID: 1 | ğŸ”´ Ğ’Ñ‹ÑĞ¾ĞºĞ¸Ğ¹ | â³ ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚                  â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ: Ğ˜Ğ·ÑƒÑ‡Ğ¸Ñ‚ÑŒ Python                        â”‚
        â”‚ ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ: ĞÑĞ½Ğ¾Ğ²Ñ‹ ÑĞ·Ñ‹ĞºĞ°, ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    """
    width = 50
    max_text_width = width - 2  
    border = "â”€" * (width - 2)
    status_info = STATUS_DISPLAY[task["status"]]
    priority_info = PRIORITY_DISPLAY[task["priority"]]
    
    print(f"â”Œ{border}â”")
    header_line = f"ID: {task["id"]} | {status_info["emoji"]} {status_info["name"]} | {priority_info["emoji"]} {priority_info["name"]}"
    print(f"â”‚ {header_line}{' ' * (max_text_width-len(header_line) - 3)}â”‚")
    print(f"â”œ{border}â”¤")
    if len(task["title"]) <= (width - 13):
        title = task["title"] + ' ' * ((width-13) - len(task["title"])) + "â”‚"
        
    else:
        title = task["title"][:((width-16) - len(task["title"]))] + "...â”‚"
    print(f"â”‚ ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ: {title}")

    if task["description"]:
        if len(task["description"]) <= (width - 13):
            description = task["description"] + ' ' * ((width-13) - len(task["description"])) + "â”‚"
        else:
            description = task["description"][:((width-16) - len(task["description"]))] + "...â”‚"
        print(f"â”‚ ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ: {description}")
    print(f"â””{border}â”˜")


def display_tasks_table(tasks: list) -> None:
    """
    ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ ÑĞ¿Ğ¸ÑĞºĞ° Ğ·Ğ°Ğ´Ğ°Ñ‡ Ğ² Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğ¼ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ.
    
    Args:
        tasks (list): Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ·Ğ°Ğ´Ğ°Ñ‡.
    
    Output format:
        â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ID â”‚ ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ            â”‚ ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚â”‚ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ    â”‚
        â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚  1 â”‚ Ğ˜Ğ·ÑƒÑ‡Ğ¸Ñ‚ÑŒ Python      â”‚ ğŸ”´ Ğ’Ñ‹Ñ.  â”‚ â³ ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚â”‚
        â”‚  2 â”‚ Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚      â”‚ ğŸŸ¡ Ğ¡Ñ€ĞµĞ´. â”‚ ğŸ”„ Ğ’ Ñ€Ğ°Ğ±. â”‚
        â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    """
    TITLE_WIDTH = 20
    ID_WIDTH = 4
    PRIORITY_WIDTH = 10
    STATUS_WIDTH = 11
    
    def truncate(text: str, width: int) -> str:
        """ĞĞ±Ñ€ĞµĞ·Ğ°ĞµÑ‚ ÑÑ‚Ñ€Ğ¾ĞºÑƒ Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ ... ĞµÑĞ»Ğ¸ Ğ´Ğ»Ğ¸Ğ½Ğ½ĞµĞµ ÑˆĞ¸Ñ€Ğ¸Ğ½Ñ‹"""
        if len(text) > width:
            return text[:width - 3] + "..."
        return text.ljust(width)

    if not tasks:
        print("âš ï¸  Ğ—Ğ°Ğ´Ğ°Ñ‡ Ğ¿Ğ¾ĞºĞ° Ğ½ĞµÑ‚")
        return
    print(f"ğŸ“‹ Ğ’ÑĞµĞ³Ğ¾ Ğ·Ğ°Ğ´Ğ°Ñ‡: {len(tasks)}")

    print("â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print("â”‚ ID â”‚ ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ             â”‚ ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚â”‚ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ    â”‚")
    print("â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤")

    for task in tasks:
        status_info = STATUS_DISPLAY[task["status"]]
        priority_info = PRIORITY_DISPLAY[task["priority"]]

        task_id = str(task["id"]).rjust(2)
        title = truncate(task["title"], TITLE_WIDTH)

        priority_short = f'{priority_info["emoji"]} {priority_info["name"][:4]}.'
        priority_short = priority_short.ljust(7)
        status_short = f'{status_info["emoji"]} {status_info["name"][:4]}.'
        status_short = status_short.ljust(8)

        print(
            f'â”‚ {task_id} â”‚ {title} â”‚ {priority_short} â”‚ {status_short} â”‚'
        )

    print("â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")




def display_header(text: str) -> None:
    """
    ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ° Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ°.
    
    Args:
        text (str): Ğ¢ĞµĞºÑÑ‚ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ°.
    
    Output format:
        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        â•‘      Ğ¡ĞĞ—Ğ”ĞĞĞ˜Ğ• ĞĞĞ’ĞĞ™ Ğ—ĞĞ”ĞĞ§Ğ˜         â•‘
        â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    """
    width = 40
    max_text_width = width - 2  
    border = "â•" * (width - 2)

    print(f"â•”{border}â•—")
    if len(text) <= max_text_width:
        print(f"â•‘{text.center(max_text_width)}â•‘")
    else:
        lines = []
        current_line = ""
        for word in text.split():
            if len(word) > max_text_width:
                if current_line:
                    lines.append(current_line)
                    current_line = ""
                for i in range(0, len(word), max_text_width):
                    lines.append(word[i:i+max_text_width])
            else:
                if len(current_line) + len(word) + (1 if current_line else 0) <= max_text_width:
                    if current_line:
                        current_line += " " + word
                    else:
                        current_line = word
                else:
                    lines.append(current_line)
                    current_line = word
        if current_line:
            lines.append(current_line)
        for line in lines:
            print(f"â•‘{line.center(max_text_width)}â•‘")
    print(f"â•š{border}â•")



def display_menu() -> None:
    """
    ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµĞ½Ñ.
    
    Output format:
        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        â•‘      TASK MANAGER CLI v1.0         â•‘
        â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        ğŸ“‹ ĞœĞ•ĞĞ®:
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        1. ğŸ“ ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ²ÑĞµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
        2. â• Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ
        3. âœï¸  ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ
        4. ğŸ—‘ï¸  Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ
        5. ğŸ” ĞŸĞ¾Ğ¸ÑĞº Ğ·Ğ°Ğ´Ğ°Ñ‡
        6. ğŸ¯ Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
        7. ğŸ“Š Ğ¡Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
        0. ğŸšª Ğ’Ñ‹Ñ…Ğ¾Ğ´
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    """

    display_header("TASK MANAGER CLI v1.0")
    print()
    print("ğŸ“‹ ĞœĞ•ĞĞ®:")
    print("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
    print("1. ğŸ“ ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ²ÑĞµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸")
    print("2. â• Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ")
    print("3. âœï¸  ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ")
    print("4. ğŸ—‘ï¸  Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ")
    print("5. ğŸ” ĞŸĞ¾Ğ¸ÑĞº Ğ·Ğ°Ğ´Ğ°Ñ‡")
    print("6. ğŸ¯ Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸")
    print("7. ğŸ“Š Ğ¡Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸")
    print("0. ğŸšª Ğ’Ñ‹Ñ…Ğ¾Ğ´")
    print("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
